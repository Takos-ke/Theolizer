<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Theolizer: Theolizerのビルド手順</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Theolizer
   &#160;<span id="projectnumber">Version.0.3.0-Temp.</span>
   </div>
   <div id="projectbrief">serializer for C++ / Do you want to update your classes easily ?</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 構築: Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'検索');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','検索');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_how_to_build_theolizer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Theolizerのビルド手順 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="HowToBuildLibrary"></a>
1.Theolizerライブラリのビルド方法</h1>
<hr/>
<h2>1-1.使用するツールとリンクするライブラリ</h2>
<table class="doxtable">
<tr>
<th>アイテム</th><th>条件</th><th>検証済のアイテム  </th></tr>
<tr>
<td>C++コンパイラ</td><td>C++11規格対応</td><td><a href="https://www.microsoft.com/ja-jp/dev">Visual Studio C++ 2015 Community update 3</a> </td></tr>
<tr>
<td></td><td></td><td><a href="https://sourceforge.net/projects/mingw-w64/">MinGW 5.4.0 32bit posix dwarf</a> </td></tr>
<tr>
<td></td><td></td><td><a href="https://sourceforge.net/projects/mingw-w64/">MinGW 5.4.0 64bit posix seh</a> </td></tr>
<tr>
<td></td><td></td><td>gcc 5.4.0(Ubuntu 5.4.0-6ubuntu1~16.04.2) </td></tr>
<tr>
<td>CMake</td><td>3.5.0以上</td><td><a href="https://cmake.org/">CMake 3.5.0 32bit</a> </td></tr>
<tr>
<td>boost</td><td>1.59.0以上</td><td><a href="http://www.boost.org/">boost 1.59.0</a> </td></tr>
</table>
<p>TheolzierのドキュメントはDoxygenとGraphvizを用いて生成します。現在は下記バージョンを用いています。</p>
<table class="doxtable">
<tr>
<th>Doxygen</th><th>Graphviz  </th></tr>
<tr>
<td><a href="http://www.stack.nl/~dimitri/doxygen/download.html">1.8.12</a></td><td><a href="http://www.graphviz.org/Download..php">2.38</a> </td></tr>
</table>
<h2>1-2.ビルド手順</h2>
<p>下記手順でTheolizerライブラリをビルドします。</p>
<ol type="1">
<li>boostのsystemとfilesystemをビルドしてインストール</li>
<li>Theolizerライブラリをビルドしてインストール</li>
</ol>
<h3>boostのsystemとfilesystemをビルドしてインストール</h3>
<p>コンパイラはTheolizerをビルドするものと同じものを使用します。<br />
</p>
<p>まず、使いたいバージョンの<a href="http://www.boost.org/users/history/">boost</a>をダウンロードして適切なフォルダへ解凍しておいて下さい。</p>
<p>次に、boostをビルドしますが、そのためのcmakeスクリプトを用意しています。Theolizerのソースのbuild/boost_buildフォルダにおいてますので、その中のファイルをboostのソースがあるフォルダ（1.59.0ならboost_1_59_0の直下)へコピーして下さい。<br />
 Windowsでビルドする場合はwindows.cmakeを、linuxでビルドする場合linux.cmakeを用います。 使う方のcmakeスクリプトをエディタで開き、下記を修正して下さい。</p>
<ul>
<li>BOOST_PREFIX : boostのインストール先フォルダ名のプリフィクス</li>
<li>CC32 : MingWまたはgccの32ビット版のbinフォルダのパス(既にパスが通っているなら指定不要)</li>
<li>CC64 : MingWまたはgccの64ビット版のbinフォルダのパス(既にパスが通っているなら指定不要)</li>
<li>build_process() : ビルドする組み合わせを指定</li>
</ul>
<p>そして、Windowsならzz_full_all.bat、linuxならzz_full_all.shを起動すればビルドとインストールされます。<br />
 １組み合わせ当たり数分でビルド完了します。</p>
<p>boostのソースがあるフォルダの直下にbuildフォルダが生成され、その中に中間ファイル群が置かれます。<br />
ビルド中のログもここに保存しますので必要に応じて確認下さい。</p>
<h3>Theolizerライブラリをビルドしてインストール</h3>
<p>boostのビルドと同様、Theolizerをビルドするためのcmakeスクリプトを用意していますので、修正してお使い下さい。</p>
<ul>
<li>THEOLIZER_SOURCE : Theolizerのソースがあるルート・フォルダ</li>
<li>THEOLIZER_BINARY : ビルド時の中間ファイル群を置くフォルダ</li>
<li>THEOLIZER_PREFIX : Theolizerのインストール先ルート・フォルダ</li>
<li>BOOST : boostがインストールされているフォルダのプリフィックス</li>
<li>LLVM : LLVMのインストール先のパス(Theolizerライブラリのビルド時は指定不要)</li>
<li>CC32 : MingWまたはgccの32ビット版のbinフォルダのパス(既にパスが通っているなら指定不要)</li>
<li>CC64 : MingWまたはgccの64ビット版のbinフォルダのパス(既にパスが通っているなら指定不要)</li>
<li>MAKE : <a href="https://wiki.qt.io/Jom">jom</a>等の高速なmakeを使う場合にそのフルパス(標準のmakeを使う時は指定不要)</li>
<li>build_by_msvc() : Visual Studio 2015でビルドする時にビルドする組み合わせを指定する</li>
<li>build_by_gcc() : MinGWもしくはgccでビルドする時にビルドする組み合わせを指定する</li>
</ul>
<p>build_by_msvc()とbuild_by_gcc()について補足</p><ul>
<li>BUILD_DRIVERにTRUEを指定するとドライバをビルドする<br />
 この時はLLVMの指定が必要</li>
<li>BUILD_DOCUMENTにTRUEを指定するとドキュメントをビルドする<br />
 この時は<a href="http://www.doxygen.jp/">Doxygen</a>と<a href="http://www.graphviz.org/">Graphviz</a>のインストールが必要</li>
</ul>
<p>下記のバッチ(Windowsの場合)、もしくは、スクリプト(linuxの場合)を起動することでTheolizerのビルド・自動テスト・インストールを行います。 １組み合わせ当たり数分でビルド完了します。</p>
<table class="doxtable">
<tr>
<th>linuxのスクリプト<br />
Windowsのバッチ</th><th>処理内容  </th></tr>
<tr>
<td>zy0_full_all.sh<br />
zz0_full_all.bat </td><td>ビルド・フォルダを削除し作成<br />
CMakeによるプロジェクト生成<br />
ライブラリのビルドとテスト<br />
指定していたらドライバのビルドとテスト<br />
ドキュメントのビルド<br />
ライブラリとドキュメントのインストール<br />
インストール後のビルド・テスト </td></tr>
<tr>
<td>zy1_config_all.sh<br />
zz1_config_all.bat </td><td>ビルド・フォルダがなければ作成<br />
<b>CMakeによるプロジェクト生成</b> </td></tr>
<tr>
<td>zy2_middle_all.sh<br />
zz2_middle_all.bat </td><td>ビルド・フォルダがなければ作成<br />
CMakeによるプロジェクト生成<br />
<b>ライブラリのビルドとテスト</b><br />
<b>指定していたらドライバのビルドとテスト</b><br />
ドキュメントのビルド<br />
<b>Theolizerのインストール</b> </td></tr>
<tr>
<td>zy3_last_all.sh<br />
zz3_last_all.bat </td><td>ビルド・フォルダがなければ作成<br />
CMakeによるプロジェクト生成<br />
<b>インストール確認のためのビルド・テスト</b> </td></tr>
</table>
<p>ビルド・フォルダに下記のバッチ(Windowsの場合)、もしくは、スクリプト(linuxの場合)が生成されます。必要に応じてお使い下さい。 また、Visual Studioの場合はソリューション・ファイル(Theolizer.sln)も生成されています。これをダブル・クリックすればVisual Studioが起動します。</p>
<table class="doxtable">
<tr>
<th>linuxのスクリプト<br />
Windowsのバッチ</th><th>処理内容  </th></tr>
<tr>
<td>zy0_config.sh<br />
zz0_config.bat </td><td>CMakeによるプロジェクト生成 </td></tr>
<tr>
<td>zy1_short_test.sh<br />
zz1_short_test.bat </td><td>ライブラリのビルドとテスト </td></tr>
<tr>
<td>zy2_long_test.sh<br />
zz1_short_test.bat </td><td>ドライバのビルドとテスト </td></tr>
<tr>
<td>zy3_full_test.sh<br />
zz3_full_test.bat </td><td>ドライバのビルドとテスト<br />
ドライバのビルドとテスト<br />
ドキュメントのビルド<br />
Theolizerのインストール<br />
インストール確認のためのビルド・テスト </td></tr>
<tr>
<td>zy4_ja.sh<br />
zz4_ja.bat </td><td>ドキュメントのビルド </td></tr>
</table>
<p><br />
 </p>
<h1><a class="anchor" id="HowToBuildDriver"></a>
2.Theolizerドライバのビルド方法</h1>
<hr/>
<h2>2-1.使用するツールとリンクするライブラリ</h2>
<p>「1-1.使用するツールとリンクするライブラリ」に加えて、下記が必要です。</p>
<table class="doxtable">
<tr>
<th>アイテム</th><th>条件</th><th>検証済のアイテム  </th></tr>
<tr>
<td>LLVM</td><td>3.9.0</td><td><a href="http://llvm.org/">LLVM 3.9.0</a> </td></tr>
</table>
<p>注）LLVM 3.8.1でもビルドできると思いますが、最終的なテストは行っていません。</p>
<h2>2-2.ビルド手順</h2>
<p>下記手順でTheolizerライブラリをビルドします。</p>
<ol type="1">
<li>boostのsystemとfilesystemをビルドしてインストール</li>
<li>LLVM(libTooling含む)をビルドしてインストール</li>
<li>Theolizerライブラリをビルドしてインストール</li>
</ol>
<h3>boostのsystemとfilesystemをビルドしてインストール</h3>
<p>「1-2.ビルド手順」の同手順と同じなので省略。</p>
<h3>LLVM(libTooling含む)をビルドしてインストール</h3>
<p>コンパイラはTheolizerをビルドするものと同じものを使用して下さい。</p>
<p>まず、<a href="http://llvm.org/releases/download.html#3.9.0">LLVM</a>をダウンロードして適切なフォルダへ解凍して下さい。</p>
<table class="doxtable">
<tr>
<th>ダウンロードするアイテム</th><th>ダウンロードするファイル名</th><th>解凍先フォルダ  </th></tr>
<tr>
<td>LLVM source code</td><td>llvm-3.9.0.src.tar.xz</td><td>llvm </td></tr>
<tr>
<td>Clang source code</td><td>cfe-3.9.0.src.tar.xz</td><td>llvm/tools/clang </td></tr>
<tr>
<td>clang-tools-extra</td><td>clang-tools-extra-3.9.0.src.tar.xz</td><td>llvm/tools/clang/tools/extra </td></tr>
</table>
<p>次に、LLVMをビルドしますが、そのためのcmakeスクリプトを用意しています。Theolizerのソースのbuild/llvm_buildフォルダにおいてますので、llvmフォルダと同じ階層のフォルダへコピーして下さい。<br />
</p>
<p>下記のようなフォルダ構成になります </p><pre class="fragment">llvm        解凍したLLVMソース
llvm_build  linux.cmake, prepare.cmake, windows.cmake, zz_full_all.bat, zz_full_all.sh
</pre><p>Windowsでビルドする場合はwindows.cmakeを、linuxでビルドする場合linux.cmakeを用います。 使う方のcmakeスクリプトをエディタで開き、下記を修正して下さい。</p>
<ul>
<li>LLVM_PREFIX : LLVMのインストール先パス名のプリフィックス</li>
<li>CC32 : MingWまたはgccの32ビット版のbinフォルダのパス(既にパスが通っているなら指定不要)</li>
<li>CC64 : MingWまたはgccの64ビット版のbinフォルダのパス(既にパスが通っているなら指定不要)</li>
<li>MAKE : <a href="https://wiki.qt.io/Jom">jom</a>等の高速なmakeを使う場合にそのフルパス(標準のmakeを使う時は指定不要)</li>
<li>build_process() : ビルドする組み合わせを指定</li>
</ul>
<p>そして、Windowsならzz_full_all.bat、linuxならzz_full_all.shを起動すればビルドとインストールされます。<br />
 １組み合わせ当たり<b>１～２時間かかります</b>ので、時間に余裕のある時にビルドして下さい。</p>
<p>llvm_buildフォルダの直下にコンパイラ毎にbuild用フォルダが生成され、その中に中間ファイル群が置かれます。<br />
ビルド中のログもここに保存しますので必要に応じて確認下さい。</p>
<h3>Theolizerライブラリをビルドしてインストール</h3>
<p>「1-2.ビルド手順」の同手順と同じなので省略。</p>
<p><br />
 </p>
<h1><a class="anchor" id="Documents"></a>
3.ドキュメントについて補足</h1>
<hr/>
<p>Theolizerのドキュメントは、主にsource/reference_and_test/jaフォルダにおいています。 また、ライブラリのソース・コードはsource/libraryですが、ユーザが直接使うもののみドキュメントを付けています。Theolizer内部のクラスについてはDoxygen化していません。 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">--目次--</a></li>
    <li class="footer">構築:
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
